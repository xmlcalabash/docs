<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Chapter 2. Running XML Calabash</title><link href="./css/pygments.css" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2024-11-26T08:02:27Z"/><meta name="generator" content="DocBook xslTNG version 2.5.0 / 855db8f2 / SAXON HE 12.5"/><link href="./css/docbook-toc.css" rel="stylesheet"/><link href="./css/docbook.css" rel="stylesheet" media="screen"/><link href="img/icon.png" rel="shortcut icon"/><link href="./css/xmlcalabash.css" rel="stylesheet"/><link href="./css/xproc.css" rel="stylesheet"/><link rel="prev" href="installation.html"/><link rel="next" href="ch02s02.html"/><link rel="up" href="index.html"/><link rel="home" href="index.html"/><script src="./js/persistent-toc.js" defer="defer"></script><script src="./js/copy-verbatim.js" defer="defer"></script><script src="./js/chunk-nav.js" defer="defer"></script></head><body class="chapter component"><nav class="top"><div><a href="index.html">Home</a> <a href="index.html">Up</a> <a href="ch02s02.html">Next</a> <a href="installation.html">Prev</a></div></nav><main><section id="running" db-chunk="running.html" db-id="d107e214" class="chapter component"><header><h2>Chapter <span class="label">2</span><span class="sep">. </span>Running XML Calabash</h2></header><div class="db-bfs"><p>The easiest way to run XML Calabash is directly from the jar file:</p><div class="pre-wrap screen-wrap"><pre class="screen verbatim verblines"><span class="line"><span class="ld"><code>java -jar xmlcalabash-3.0.0-alpha1.jar <em class="replaceable">options…</em></code></span></span></pre></div><p>Run this way, all of the dependencies included in the
<code class="directory filename">lib</code> directory are automatically included on the classpath.</p><p>You can also run the main class directly, for example in a build system or
a shell script:</p><div class="pre-wrap screen-wrap"><pre class="screen verbatim verblines"><span class="line"><span class="ld"><code>java com.xmlcalabash.app.Main <em class="replaceable">options…</em></code></span></span></pre></div><p>But if you choose this form, you must ensure that the classpath contains
both the XML Calabash jar file and all of the necessary dependencies.</p><p>One feature of the second form is that it allows you to change or update the dependencies.
For example, if you have a Saxon-EE license, put the Saxon-EE jar file on the class path
<em>instead of</em> the Saxon-HE jar file.</p><p>Elsewhere in this document, we assume that the command “<code class="command">xmlcalabash</code>”
runs XML Calabash. This can be replaced by the <code class="command">java -jar …</code> version above or
by your own script.</p><p>XML Calabash has a command driven command-line interface. It supports
three commands: <code class="command"><a href="#run-run">run</a></code>, to run a pipeline;
<code class="command"><a href="ch02s03.html">version</a></code>, to print the version, and
<code class="command"><a href="ch02s02.html">help</a></code> to display help. If no command is
given, the <code class="command">run</code> command is assumed.</p></div><section id="run-run" class="section"><header><h2>The <code class="literal">run</code> command</h2></header><div class="cmdsynopsis-wrap"><div class="cmdsynopsis"><span class="command">xmlcalabash</span> <span class="cmdpunct">[</span><span class="arg">run</span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-configuration">--configuration:<em class="replaceable">configuration-file</em></a></span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-input">--input:<em class="replaceable">port</em>=<em class="replaceable">uri</em></a></span><span class="cmdpunct">…</span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-output">--output:<em class="replaceable">port</em>=<em class="replaceable">filespec</em></a></span><span class="cmdpunct">…</span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-namespace">--namespace:<em class="replaceable">prefix</em>=<em class="replaceable">uri</em></a></span><span class="cmdpunct">…</span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-description">--description:<em class="replaceable">description-file</em></a></span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-graph">--graph:<em class="replaceable">graph-file</em></a></span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-step">--step:<em class="replaceable">step-name</em></a></span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-verbosity">--verbosity:<em class="replaceable">verbosity</em></a></span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-schema-aware">--schema-aware</a></span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-debug">--debug</a></span><span class="cmdpunct">]</span> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-help">--help</a></span><span class="cmdpunct">]</span><br/> <span class="cmdpunct">[</span><span class="arg"><a href="#cli-option"><em class="replaceable">option</em>=<em class="replaceable">value</em></a></span><span class="cmdpunct">…</span><span class="cmdpunct">]</span></div></div><p>Where the options and arguments are:</p><dl class="long-terms variablelist"><div class="varlistentry"><dt><span class="term"><code class="option">run</code>, selects the run command</span></dt><dd><p>If the command is omitted, <code class="literal">run</code> is assumed.</p></dd></div><div id="cli-configuration" class="varlistentry"><dt><span class="term"><code class="option">--configuration:<em class="replaceable">configuration-file</em></code>, identifies
  a configuration file</span></dt><dd><p>When XML Calabash begins, it reads configuration settings from
<a href="configuration.html" class="link">a configuration file</a>. If you don’t specify
a configuration file, it will search first for <code class="filename">.xmlcalabash3</code> in the current
directory and then in your home directory.</p></dd></div><div id="cli-input" class="varlistentry"><dt><span class="term"><code class="option">--input:<em class="replaceable">port</em>=<em class="replaceable">uri</em></code>, identifies
  an input</span></dt><dd><p>This option associates the resource identified by the <em class="replaceable">uri</em> with
the input port named <em class="replaceable">port</em>. If the <code class="option">--input</code> option
is repeated for the same <em class="replaceable">port</em>, the resources become a sequence of
documents on that port, in the order specified.</p><p>The pipeline must have an input port named <em class="replaceable">port</em>.</p></dd></div><div id="cli-output" class="varlistentry"><dt><span class="term"><code class="option">--output:<em class="replaceable">port</em>=<em class="replaceable">filespec</em></code>, identifies
  an output</span></dt><dd><p>In the simplest case, at most one document appears on the output <em class="replaceable">port</em>
and <em class="replaceable">filespec</em> is just a filename. The <em class="replaceable">filespec</em> can
also be a template.
The output documents are numbered, starting at 1. Within the <em class="replaceable">filespec</em>,
the string “<code class="literal">%d</code>” will be replaced by the document number.
(The string “<code class="literal">%h</code>” will be replaced by the document number in hexadecimal and
“<code class="literal">%o</code>” will be replaced by the document number in octal, for no good reason.)
Zeros can be added to pad the value, “<code class="literal">%00d</code>” will produce a document number
that is at least two digits long, padded on the left with 0’s if there are fewer than 10 documents.
For completeness, a literal “%” can be added to the filename with “<code class="literal">%%</code>”
in the <em class="replaceable">filespec</em>.</p><p>If the <em class="replaceable">filespec</em> does not contain a number template, then all
of the outputs on the port will be concatenated to the same file.
You may not repeat the <code class="option">--output</code> option for the same port.</p><p>The pipeline must have an output port named <em class="replaceable">port</em>.</p><p>If the pipeline writes to a port for which there is no corresponding
<code class="option">--output</code> option, the results will be written to “standard output”, usually
the shell window. In this case, a header is added before the output identifying the port
name, document number, and base URI. A line of equal signs appears as a separator between
documents. (The header and separator are omitted if standard output is being redirected, for example, to a file. But beware that the check for “is being redirected” isn’t very sophisticated and may be wrong
in some circumstances.)</p></dd></div><div id="cli-namespace" class="varlistentry"><dt><span class="term"><code class="option">--namespace:<em class="replaceable">prefix</em>=<em class="replaceable">uri</em></code>,
  identifies a namespace binding</span></dt><dd><p>Binds the specified <em class="replaceable">prefix</em> to the <em class="replaceable">uri</em>.
This has no effect on the pipeline; these bindings are only used when evaluating
expressions used to define <span class="phrase"><a href="#cli-option">options</a></span>.
</p><p>If no namespace bindings are provided, the default bindings are 
<code>xs</code>, <code>fn</code>, <code>map</code>, <code>array</code>, and <code>math</code>
to their traditional XML Schema and XPath URIs. The prefix
<code>saxon</code> is also bound to the Saxon extension namespace,
<code class="literal">http://saxon.sf.net/</code>.</p></dd></div><div id="cli-description" class="varlistentry"><dt><span class="term"><code class="option">--description:<em class="replaceable">description-file</em></code>, SVG pipeline output</span></dt><dd><p>If <span class="phrase"><a href="cc-graphviz.html">Graphviz</a></span> is configured, this
option writes an SVG description of the pipeline to the <em class="replaceable">description-file</em>.
</p></dd></div><div id="cli-graph" class="varlistentry"><dt><span class="term"><code class="option">--graph:<em class="replaceable">graph-file</em></code>, SVG graph output</span></dt><dd><p>The <code class="option">--description</code> option generates a graphical depiction of the pipeline.
That is a description of the <em>input</em> to the processor. The processor does
a number of transformations and constructs a graph to execute. The <span class="optional">--graph</span>
option writes an SVG description of the constructed graph to the <em class="replaceable">graph-file</em>.
</p></dd></div><div id="cli-step" class="varlistentry"><dt><span class="term"><code class="option">--step:<em class="replaceable">step-name</em></code>, identifies a step</span></dt><dd><p>If the input pipeline document is a <code class="tag tag-element">p:library</code>, this option identifies a step
within that library to run. <em>NOT YET IMPLEMENTED.</em></p></dd></div><div id="cli-verbosity" class="varlistentry"><dt><span class="term"><code class="option">--verbosity:<em class="replaceable">verbosity</em></code></span></dt><dd><p>There are five levels of verbosity. The level of verbosity determines how much
detail is printed about the progress of a running pipeline.</p><dl class="variablelist"><div class="varlistentry"><dt><span class="term"><code class="literal">detail</code></span></dt><dd><p>Lots of detail, show everything.</p></dd></div><div class="varlistentry"><dt><span class="term"><code class="literal">progress</code></span></dt><dd><p>Show when the execution of each step begins.</p></dd></div><div class="varlistentry"><dt><span class="term"><code class="literal">normal</code></span></dt><dd><p>Show relevant status messages.</p></dd></div><div class="varlistentry"><dt><span class="term"><code class="literal">warning</code></span></dt><dd><p>Show only warnings and errors.</p></dd></div><div class="varlistentry"><dt><span class="term"><code class="literal">quiet</code></span></dt><dd><p>No messages except fatal errors</p></dd></div></dl><p>It’s all a bit random, but that’s the idea.</p></dd></div><div id="cli-schema-aware" class="varlistentry"><dt><span class="term"><code class="option">--schema-aware</code></span></dt><dd><p>Requests schema-aware processing.</p><p>Schema-aware processing requires Saxon EE and a valid Saxon license.</p></dd></div><div id="cli-debug" class="varlistentry"><dt><span class="term"><code class="option">--debug</code></span></dt><dd><p>If debugging is enabled, the processor prints more, and sometimes more random seeming,
messages about its progress.</p></dd></div><div id="cli-help" class="varlistentry"><dt><span class="term"><code class="option">--help</code></span></dt><dd><p>This is equivalent to issuing the <code class="command"><a href="ch02s02.html">help</a></code> command.
It’s provided as an option for convenience.
</p></dd></div><div id="cli-option" class="varlistentry"><dt><span class="term"><code class="option"><em class="replaceable">option</em>=<em class="replaceable">value</em></code>, sets an option</span></dt><dd><p>You can provide values for pipeline options on the command line. These override any defaults
declared in the pipeline. There must be a pipeline option named <em class="replaceable">option</em>.</p><p>The option name can be an EQName or it can use a prefix
previously defined with <code class="option"><a href="#cli-namespace">--namespace</a></code>; if the option is a simple
<code class="type">NCName</code>, it is not in a namespace.</p><p>If the <em class="replaceable">value</em> begins with “?”, what follows is taken to be
an XPath expression. That expression is evaluated using the namespace bindings defined. The
context item is undefined. The result of evaluating the expression is the value of the option.
If the <em class="replaceable">value</em> does not begin with a “?”, the whole string
becomes the value as an <code class="type">xs:untypedAtomic</code>.</p><p>If multiple assignments to the same <code class="option">option</code>
appear, the option’s value will be a sequence with those values in the order
specified.</p></dd></div></dl></section></section></main><nav class="bottom"><table><tr><td class="previous"><a href="installation.html">Prev</a></td><td class="up"><a href="index.html">Up</a></td><td class="next"><a href="ch02s02.html">Next</a></td></tr><tr><td class="previous">Chapter <span class="label">1</span><span class="sep">. </span>Installation</td><td class="up"><a href="index.html">Home</a></td><td class="next">The <code class="literal">help</code> command</td></tr></table><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQ4je2UUW3EMAyGv0wDUAhlkDBIyuAYXCEclEJoGZRBUgYOgzJoGHgPW6o7rWq35+2TIkWW9duW7N+oKuM46jiOGGMAaNsW5xzee5xzn8EvRESXZUFEWNcVAFWl73v6vjcGUIAYIyEEANZ1RUSY55lSCo/HA4BhGGiahtvthnOOtm0BSCnRdd1eVAGNMeoR27aptVattbpt22FOjFGrzjsX1I7q/4q3y4xf8i/4FwT3Pcw5Y4zBWvujfQMopZBzJuf8XbCeVyWEgHOO+/2+x0SEaZpIKSEih0X2Wz6jdlxKuezaqL7qpZS0lLKbw/M4ANba3RyapiGE8OJGqOrpizGq916999VATvM/AGFn1sxsVjL5AAAAAElFTkSuQmCC" alt="[toc]"/></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQ4jaWT0Q3DIAxEz52AEbyB2cDZhBEY3SNcPyqqBEwqpZaQAHNP5jBCEiJCPAiSIgAeiUe8zoveO9x9e9jd0XtfKwHA1hpHtNY49rO8u59zn4mqMiJSyFkcEVTVFQCAtdYFMotrrXN111JnyA/xCsggN2JeXmGEmaGU8l2XUmBm29fZuh0RW2PTK2SGZcamADPb3nmGmNkKOI7j1rAzJG2kcWhqkstQ1QX+/2ciKU/FJOUN6JFZYWpmK3sAAAAASUVORK5CYII=" alt="X"/></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav></body></html>