<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>cx:cache-delete</title><link href="./css/pygments.css" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2024-12-03T11:08:21Z"/><meta name="generator" content="DocBook xslTNG version 2.5.0 / 855db8f2 / SAXON HE 12.5"/><link href="./css/docbook-toc.css" rel="stylesheet"/><link href="./css/docbook.css" rel="stylesheet" media="screen"/><link href="img/icon.png" rel="shortcut icon"/><link href="./css/xmlcalabash.css" rel="stylesheet"/><link href="./css/xproc.css" rel="stylesheet"/><link rel="prev" href="cx-cache-add.html"/><link rel="next" href="cx-metadata-extractor.html"/><link rel="up" href="extension-steps.html"/><link rel="home" href="index.html"/><script src="./js/persistent-toc.js" defer="defer"></script><script src="./js/copy-verbatim.js" defer="defer"></script><script src="./js/chunk-nav.js" defer="defer"></script></head><body class="component refentry"><nav class="top"><div><a href="index.html">Home</a> <a href="extension-steps.html">Up</a> <a href="cx-metadata-extractor.html">Next</a> <a href="cx-cache-add.html">Prev</a></div></nav><main><section id="cx-cache-delete" db-chunk="cx-cache-delete.html" db-id="d111e7244" class="component refentry"><div id="cx-cache-delete_refnamediv1" class="refnamediv"><header><h2>Name</h2></header><p><span class="refname">cx:cache-delete</span><span class="refpurpose"><span class="refpurpose-sep"> — </span><span class="refpurpose-text">A step for deleting documents from the runtime cache</span><span class="refpurpose-punc">.</span></span></p></div><section id="cx-cache-delete_refsynopsisdiv1" class="refsynopsisdiv"><header><h2>Synopsis</h2></header><div class="declare-step"><table class="tableaux"><thead><tr><th class="port">Input port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">source</td><td class="check">✔ </td><td class="check"> </td><td> </td></tr></tbody></table><table class="tableaux"><thead><tr><th class="port">Output port</th><th class="check">Primary</th><th class="check">Sequence</th><th>Content types</th></tr></thead><tbody><tr><td class="primary">result</td><td class="check">✔ </td><td class="check"> </td><td> </td></tr></tbody></table><table class="tableaux"><thead><tr><th class="optname">Option name</th><th>Type</th><th>Default value</th></tr></thead><tbody><tr><td class="optname">fail-if-not-in-cache</td><td>xs:boolean</td><td>false()</td></tr><tr><td class="optname">href</td><td>xs:anyURI?</td><td>()</td></tr></tbody></table><details><summary>Declaration</summary><div class="pre-wrap programlisting-wrap highlight" db-startinglinenumber="1" db-numberoflines="6"><pre class="language-xml long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;p:declare-step</span> <span class="na">xmlns:p=</span><span class="s">"http://www.w3.org/ns/xproc"</span><span class="nt">&gt;</span></code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   <span class="nt">&lt;p:option</span> <span class="na">name=</span><span class="s">"href"</span> <span class="na">as=</span><span class="s">"xs:anyURI?"</span> <span class="na">select=</span><span class="s">"()"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   <span class="nt">&lt;p:option</span> <span class="na">name=</span><span class="s">"fail-if-not-in-cache"</span> <span class="na">as=</span><span class="s">"xs:boolean"</span> <span class="na">select=</span><span class="s">"false()"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>   <span class="nt">&lt;p:input</span> <span class="na">port=</span><span class="s">"source"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>   <span class="nt">&lt;p:output</span> <span class="na">port=</span><span class="s">"result"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;/p:declare-step&gt;</span></code></span></span></pre></div></details></div></section><section id="cx-cache-delete_refsection1" class="refsection"><header><h2>Description</h2></header>
      

<p>XML Calabash maintains a cache of documents. If a step attempts to load a
URI, and that URI is present in the cache, the cached value will always be
returned. Some steps use the cache implicitly (for example, the validate steps
update it to hold schema documents).</p>

<p>A pipeline can remove a document from the cache explicitly with <code class="tag tag-element">cx:cache-delete</code>.
If the <code class="option">href</code> option is provided, it is used as the URI for
caching, otherwise the <span class="port">source</span> document URI is used.
<span class="pipeline-error">It is a
<span class="glossterm"><span class="glossterm"><a href="glossary.html#glossary_ge1">dynamic error</a></span> (<code>cxerr:XI0030</code>)</span> if the <span class="port">source</span> document does not have
a base URI and the <code class="option">href</code> option is not provided.</span>
</p>

<p>Irrespective of the cache URI, the step simply copies it’s <span class="port">source</span>
document to the <span class="port">result</span> port. (It does not change the document’s base URI,
even if an <code class="option">href</code> option is provided to the <code class="tag tag-element">cx:cache-add</code> step.)</p>

<p><span class="pipeline-error">It is a <span class="glossterm"><span class="glossterm"><a href="glossary.html#glossary_ge1">dynamic error</a></span> (<code>cxerr:XI0038</code>)</span> if the
<code class="option">fail-if-not-in-cache</code> option is <code class="literal">true</code> and the
cache does not contains a document with the URI being cached.</span></p>

<section id="cx-cache-delete_refsection1_refsection1" class="refsection"><header><h3>Options</h3></header>


<p>There are two  options.</p>

<dl class="variablelist"><div class="varlistentry"><dt><span class="term"><code class="option">href</code></span></dt><dd><p>The URI to cache. Defaults to the <span class="port">source</span> document URI.</p></dd></div><div class="varlistentry"><dt><span class="term"><code class="option">fail-if-not-in-cache</code></span></dt><dd><p>Determines whether the URI must already exist in the cache.</p></dd></div></dl>
</section>

<section id="cx-cache-delete_refsection1_refsection2" class="refsection"><header><h3>Document properties</h3></header>


<p>No properties are changed.</p>
</section>
</section></section></main><nav class="bottom"><table><tr><td class="previous"><a href="cx-cache-add.html">Prev</a></td><td class="up"><a href="extension-steps.html">Up</a></td><td class="next"><a href="cx-metadata-extractor.html">Next</a></td></tr><tr><td class="previous">cx:cache-add</td><td class="up"><a href="index.html">Home</a></td><td class="next">cx:metadata-extractor</td></tr></table><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQ4je2UUW3EMAyGv0wDUAhlkDBIyuAYXCEclEJoGZRBUgYOgzJoGHgPW6o7rWq35+2TIkWW9duW7N+oKuM46jiOGGMAaNsW5xzee5xzn8EvRESXZUFEWNcVAFWl73v6vjcGUIAYIyEEANZ1RUSY55lSCo/HA4BhGGiahtvthnOOtm0BSCnRdd1eVAGNMeoR27aptVattbpt22FOjFGrzjsX1I7q/4q3y4xf8i/4FwT3Pcw5Y4zBWvujfQMopZBzJuf8XbCeVyWEgHOO+/2+x0SEaZpIKSEih0X2Wz6jdlxKuezaqL7qpZS0lLKbw/M4ANba3RyapiGE8OJGqOrpizGq916999VATvM/AGFn1sxsVjL5AAAAAElFTkSuQmCC" alt="[toc]"/></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQ4jaWT0Q3DIAxEz52AEbyB2cDZhBEY3SNcPyqqBEwqpZaQAHNP5jBCEiJCPAiSIgAeiUe8zoveO9x9e9jd0XtfKwHA1hpHtNY49rO8u59zn4mqMiJSyFkcEVTVFQCAtdYFMotrrXN111JnyA/xCsggN2JeXmGEmaGU8l2XUmBm29fZuh0RW2PTK2SGZcamADPb3nmGmNkKOI7j1rAzJG2kcWhqkstQ1QX+/2ciKU/FJOUN6JFZYWpmK3sAAAAASUVORK5CYII=" alt="X"/></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav></body></html>